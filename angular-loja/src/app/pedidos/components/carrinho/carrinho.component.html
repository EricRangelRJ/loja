<br>
<div *ngIf="itens().length > 0">

  <div>
    <span>{{cliente.nome}}</span>
  </div>

  <body>
    <header class="dsc-header-client">
      <nav class="dsc-container">
        <h1>Carrinho</h1>
        <div class="dsc-navbar-right">
          <div class="dsc-menu-items-container">
            <div class="dsc-menu-item">
              <img src="assets/imagens/carrinho.svg" alt="Carrinho de compras" />
              <span>x{{itens().length}}</span>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <main>
      <section id="cart-container-section" class="dsc-container">
        <div class="dsc-card dsc-mb20">
          <div *ngFor="let itemPedido of itens()">

            <div class="dsc-cart-item-container dsc-line-bottom">
              <div class="dsc-cart-item-left">
                <img src="assets/imagens/poteAlho.png" alt="Computador" />
                <div class="dsc-cart-item-description">
                  <h3>{{itemPedido.produto.nomeProduto}}</h3>
                  <div class="dsc-cart-item-quantity-container">
                    <!-- <button class="dsc-cart-item-quantity-btn">-</button>
                    <p>1</p>
                    <button class="dsc-cart-item-quantity-btn">+</button>
                    <span class="remove-item" (click)="removeItem(itemPedido)">x</span> -->


                    <div class="input-group input-group-sm mb-3">
                      <button type="button" class="btn btn-light btn-sm" (click)="downQuantity(itemPedido)">-</button>
                      <!-- <input class="form-control form-control-sm" type="number" [(ngModel)]="itemPedido.quantidade" min="1"/> -->
                      <input type="number" style="width: 1.8em;"  [(ngModel)]="itemPedido.quantidade" (focusout)="verificarQuantidade(itemPedido)" min="1"/>

                      <button type="button" class="btn btn-light btn-sm" (click)="upQuantity(itemPedido)" >+</button>
                    </div>

                    <!-- <div style="font-size: 25px;" class="dsc-cart-item-quantity-btn" (click)="upQuantity(itemPedido)">-</div> -->

                   <!-- <input type="number" style="width: 1.8em;"  [(ngModel)]="itemPedido.quantidade" (focusout)="verificarQuantidade(itemPedido)" min="0"/> -->

                    <!-- <div style="font-size: 25px;" class="dsc-cart-item-quantity-btn" (click)="upQuantity(itemPedido)">+</div> -->
                  </div>
                </div>
              </div>
              <div class="dsc-cart-item-right">
                {{subTotal(itemPedido) | currency:'R$ '}}
              </div>
            </div>
          </div>
          <div class="dsc-cart-total-container">
            <h3 style="font-size: 70%;"> Desconto: &nbsp;
              {{valorDesconto | currency: 'R$ '}}
            </h3>
            <h3> Total: &nbsp;
              {{total() | currency:'R$ '}}
            </h3>
          </div>
        </div>
        <br>

        <section class="example-section">
          <mat-checkbox class="example-margin" [labelPosition]="'before'"
            [(ngModel)]="temDesconto">Aplicar desconto ao pedido?
          </mat-checkbox>
        </section>
        <form [formGroup]="form">

          <div *ngIf="temDesconto">
            <mat-form-field class="fullWidth" appearance="fill">
              <mat-label>Desconto:</mat-label>
              <input matInput type="number" required  min="0"
                formControlName="desconto"  placeholder="Informe o valor do desconto..."
              />
            </mat-form-field>

            <div *ngIf="!checked">
              <span> ** ERRO: Valor do desconto é superior ao valor total do pedido.</span>
            </div>
          </div>
          <mat-form-field class="fullWidth" appearance="fill">
            <mat-label>Vendedor:</mat-label>
            <mat-select formControlName="vendedor">
              <mat-option></mat-option>
              <mat-option *ngFor="let vendedor of vendedores" [value]="vendedor.idVendedor">
                {{vendedor.nome }}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="form.get('vendedor')?.invalid">{{
              getErrorMessage("vendedor")
            }}</mat-error>
          </mat-form-field>
        </form>
        <div class="dsc-btn-page-container">


          <button class="dsc-btn dsc-btn-blue" [disabled]="itens.length != 0 || (temDesconto && !valorDesconto) || (!checked || !temVendedor )" type="button"  color="primary" mat-raised-button (click)="confirmar()">Finalizar pedido</button>

          <!--Exibe o botão caso ainda exista produtos não adicionados-->
          <div *ngIf="itens.length != qtdeProdutos">
            <button class="dsc-btn dsc-btn-white" (click)="voltar()" type="button">
              Continuar comprando
            </button>
          </div>
        </div>
      </section>
    </main>
  </body>

</div>

